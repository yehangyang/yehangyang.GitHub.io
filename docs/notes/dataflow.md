
### Dataflow架构

Dataflow架构是一种计算架构，它通过数据流动来驱动计算过程，而非常规指令流动。与传统的冯·诺依曼架构不同，Dataflow架构强调并行(流水)处理和数据驱动的执行模型。

- 定义与基本概念：在Dataflow架构中，程序被表示为一个数据流图(Dataflow Graph)， 其中节点代表计算操作，边代表数据依赖关系。每个节点在其所有输入数据准备好后立即执行，并将结果传递给下游节点。
    
- Dataflow架构的历史背景：Dataflow架构的概念最早可以追溯到20世纪60年代和70年代，当时研究人员开始探索如何通过并行处理提高计算性能。MIT的Tagged Token Dataflow和曼彻斯特大学的Dataflow Machine是早期的经典实现。
    

### [](https://1nfinite.ai/t/dataflow/97#h-3)冯·诺依曼架构

冯·诺依曼架构是现代计算机系统的基础架构，由约翰·冯·诺依曼在20世纪40年代提出。它采用存储程序的概念，即程序指令和数据存储在同一个存储器中，并通过中央处理单元（CPU）逐条执行指令。

- 基本概念：冯·诺依曼架构包括五个主要部分：输入设备、输出设备、存储器、算术逻辑单元（ALU）和控制单元。程序指令和数据存储在存储器中，CPU从存储器中读取指令并执行。
    
- 指令周期：冯·诺依曼架构的执行过程大致可以分为取指、译码、执行，访存和写回5个阶段。每个指令按顺序执行，形成一个指令周期。
    

### [](https://1nfinite.ai/t/dataflow/97#dataflow-4)Dataflow架构与冯·诺依曼架构的对比

Dataflow架构与冯·诺依曼架构在执行模型、并行处理能力和能效等方面存在显著差异。

- 执行模型：
    
    - 冯·诺依曼架构：采用顺序执行模型，指令按顺序从存储器中读取并执行。每条指令的执行依赖于前一条指令的完成。
        
    - Dataflow架构：采用数据驱动的执行模型，节点在其所有输入数据准备好后立即执行。多个节点可以并行执行，只要数据依赖关系允许。
        
- 并行处理能力：
    
    - 冯·诺依曼架构：并行处理能力有限，主要依赖于多核处理器和超标量技术来提高并行性 （GPU除外）。
        
    - Dataflow架构：天然支持并行处理，多个独立的计算操作可以同时执行，从而显著提高计算性能。
        
- 能效比：
    
    - 冯·诺依曼架构：由于指令调度和控制开销较大，而且访存过于频繁（访存的能耗约为ALU运算的20倍左右），所以能效比相对较低。
        
    - Dataflow架构：避免了传统架构中的指令调度和控制开销，每个节点只在需要时执行，减少了不必要的计算和数据传输，能效比更高。
        

以下是卷积在冯·诺依曼架构和Dataflow架构下的执行过程：

[![](https://1nfinite.ai/uploads/default/optimized/1X/fc2d9a8c47c3b458e344e9d5f6943c04069ebb3b_2_690x246.png)

1090×390 37.1 KB

](https://1nfinite.ai/uploads/default/original/1X/fc2d9a8c47c3b458e344e9d5f6943c04069ebb3b.png)

  
_图 1：卷积在传统的架构下程序执行过程 （来源：【6】）_

[![](https://1nfinite.ai/uploads/default/optimized/1X/ebfcb88c7fd0878ead3d5e1c3d756addc8c5c813_2_690x346.png)

1092×549 61.2 KB

](https://1nfinite.ai/uploads/default/original/1X/ebfcb88c7fd0878ead3d5e1c3d756addc8c5c813.png)

  
_图 2：卷积在数据流架构下程序执行过程 （来源：【6】）_

比较分析上述过程，可以发现，除了指令驱动和数据驱动的区别之外，还有一个重要的区别，**计算的中间数据不需要写回内存**。


---
以上内容摘自：https://1nfinite.ai/t/dataflow/97

一下是我对 Dataflow 架构的理解：

Dataflow 架构下，指令的发射和执行解耦。只要数据依赖满足，硬件单元即可开始工作。
相反在指令流架构中，指令需要按部就班，完成一条才能执行下一条，指令发射的并行度上限就是执行的并行度上限。

Dataflow 架构下，指令可以做的很“大”，

